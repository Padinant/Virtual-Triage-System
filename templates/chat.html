<!-- This is some HTML code for the chat page -->


<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>FAQ Chat Page(HTTP)</title>
  <link href="/chat.css" rel="stylesheet" />
</head>
<body>
  <h2>Interactive FAQ Chat</h2>
  <div class="row">
    <input id="text" placeholder="Type a message...">
    <button id="send">Send</button>
  </div>
  <div id="messages"></div>

  <script>
    // Here is some javascript code
    const input = document.getElementById('text');
    const sendButton = document.getElementById('send');
    const messages = document.getElementById('messages');

    function addBubble(text, who) {
      const div = document.createElement('div');
      div.className = 'msg';
      div.textContent = (who === 'you' ? 'You: ' : 'CSEE Bot: ') + text;
      messages.appendChild(div);
      messages.scrollTop = messages.scrollHeight;
    }

    async function send() {
      const text = input.value.trim();
      if (!text) return;
      addBubble(text, 'you');
      input.value = '';
      const res = await fetch('/message', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({ text })
      });
      const data = await res.json();
      addBubble(data.reply, 'bot');
    }

    // execute the send function after clicking the button or pressing enter
    sendButton.onclick = send;
    input.addEventListener('keydown', e => { if (e.key === 'Enter') send(); });
  </script>
</body>
</html>
