{% extends "base.html" %}

{% set header_eyebrow_class = 'top-header-2-eyebrow-admin-faq' %}
{% set header_heading_class = 'top-header-2-heading-admin-faq' %}

{% block title %}{{ title }}{% endblock %}

{% block styles %}
  <link href="/admin-faq-search.css" rel="stylesheet" />
{% endblock %}

{% block content %}
    <!-- Page title -->
    <h1 class="page-title page-title-admin-faq">Admin FAQ</h1>

    <!-- Admin search form -->
    <form class="faq-search" id="admin-faq-search" action="{{ url_for('faq_admin') }}">
      <!-- Input field -->
      <input
        autocomplete="off"
        class="faq-search-input"
        id="admin-faq-query"
        name="query"
        placeholder="Search admin FAQs..."
        type="search"
        value="{{ query | default('', true) }}"
      />
      <!-- Search button -->
      <button class="faq-search-submit" id="admin-faq-search-button" type="submit">
        Search
      </button>
    </form>

    <!-- Dropdown menu for browsing admin FAQ topics -->
    <details class="faq-dropdown">
      <summary class="faq-dropdown-toggle">All Categories</summary>
      <ul class="faq-dropdown-list">
      {%for item in category_items %}
        <li><a class="faq-dropdown-link" href="#">{{ item.category_name }}</a></li>
      {% endfor %}
      </ul>
    </details>

    <!-- Action button for adding entries -->
    <a class="admin-action-button admin-action-button-add" role="button" href="{{ url_for('faq_admin_add') }}">
      Add Item
    </a>

    {% for item in faq_items %}
      <!-- Each FAQ entry includes contextual actions -->
      <section class="admin-faq-entry">
        <div class="admin-faq-heading-row">
          <div class="admin-faq-metadata">
            <h2 class="section-heading">FAQ Entry ID: {{ item.id }}</h2>
            <p class="admin-faq-info">Author: {{ item.author }}</p>
            <p class="admin-faq-info">Timestamp: {{ item.timestamp }}</p>
            <p class="admin-faq-info">Category: {{ item.category }}</p>
          </div>
          <div class="admin-action-group">
            <a class="admin-action-button admin-action-button-edit" role="button" href="{{ url_for('faq_admin_edit', faq_id=item.id) }}">Edit</a>
            <a class="admin-action-button admin-action-button-remove" role="button" href="{{ url_for('faq_admin_remove', faq_id=item.id) }}">Remove</a>
          </div>
        </div>
        <div class="admin-faq-body">
          {{ item.text | safe }}
        </div>
      </section>
    {% endfor %}
{% endblock %}

{% block chatbot_widget %}
  {% include "chatbot-widget.html" %}
{% endblock %}
