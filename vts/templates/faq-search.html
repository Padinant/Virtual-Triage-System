{% extends "base.html" %}

{% set header_eyebrow_class = 'top-header-2-eyebrow-faq' %}
{% set header_heading_class = 'top-header-2-heading-faq' %}

{% block title %}{{ title }}{% endblock %}

{% block styles %}
  <link href="/faq-search.css" rel="stylesheet" />
{% endblock %}

{% block content %}
    <!-- Page title -->
    <h1 class="page-title page-title-faq">Frequently Asked Questions (FAQ)</h1>

    <!-- Faq search bar section -->
    <form class="faq-search" id="faq-search" action="{{ url_for('faq_page') }}">
      <!-- Input field -->
      <input
        autocomplete="off"
        class="faq-search-input"
        id="faq-query"
        name="query"
        placeholder="Search FAQs..."
        type="search"
        value="{{ query | default('', true) }}"
      />
      <!-- Search button -->
      <button class="faq-search-submit" id="faq-search-button" type="submit">
        Search
      </button>
    </form>

    <!-- Dropdown menu for FAQ categories -->
    <details class="faq-dropdown">
      <summary class="faq-dropdown-toggle">All Categories</summary>
      <ul class="faq-dropdown-list">
      {%for item in category_items %}
        <li><a class="faq-dropdown-link" href="#">{{ item.category_name }}</a></li>
      {% endfor %}
      </ul>
    </details>

    <!-- Every item here renders a single FAQ entry -->
    {% for item in faq_items %}
      <section class="faq-entry">
        {{ item.text | safe }}
      </section>
    {% endfor %}
{% endblock %}

{% block chatbot_widget %}
    <!-- Floating chatbot widget -->
    <div id="chatbot-widget" class="chatbot-widget">
      <div class="chatbot-widget-header">
        <span class="chatbot-widget-title">Ask Chatbot</span>
        <div class="chatbot-widget-controls">
          <button id="chatbot-widget-expand" class="chatbot-widget-expand" title="Expand">â¤¢</button>
          <button id="chatbot-widget-close" class="chatbot-widget-close" title="Close">&times;</button>
        </div>
      </div>
      <div id="chatbot-widget-messages" class="chatbot-widget-messages">
        <div class="message bot">
          <img src="{{ url_for('static', filename='UMBC_STYLES/dogumbc.png') }}" alt="UMBC Mascot" class="avatar">
          <div class="bubble bot-bubble">How can I help you?</div>
        </div>
      </div>
      <div class="chatbot-widget-input">
        <form id="chatbot-widget-form">
          <input id="chatbot-widget-input" type="text" placeholder="Type your question..." required />
          <button type="submit">Send</button>
        </form>
      </div>
    </div>

    <!-- Floating chatbot button -->
    <button id="chatbot-float-btn" class="chatbot-float-btn">
      <img src="{{ url_for('static', filename='UMBC_STYLES/UMBC-retriever-social-media.png') }}" alt="Chatbot" />
    </button>

    <script src="/static/chatwidget.js"></script>
{% endblock %}
