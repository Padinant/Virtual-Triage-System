{% extends "base.html" %}

{% set header_eyebrow_class = 'top-header-2-eyebrow-faq' %}
{% set header_heading_class = 'top-header-2-heading-faq' %}

{% block title %}{{ title }}{% endblock %}

{% block styles %}
  <link href="/faq-search.css" rel="stylesheet" />
{% endblock %}

{% block content %}
    <!-- Page title -->
    <h1 class="page-title page-title-faq">Frequently Asked Questions (FAQ)</h1>

    <!-- Faq search bar section -->
    <form class="faq-search" id="faq-search" action="{{ url_for('faq_page') }}">
      <!-- Input field -->
      <input
        autocomplete="off"
        class="faq-search-input"
        id="faq-query"
        name="query"
        placeholder="Search FAQs..."
        type="search"
        value="{{ query | default('', true) }}"
      />
      <!-- Search button -->
      <button class="faq-search-submit" id="faq-search-button" type="submit">
        Search
      </button>
    </form>

    <!-- Dropdown menu for FAQ categories -->
    <div class="faq-controls">
      <details class="faq-dropdown">
      <summary class="faq-dropdown-toggle">{{ selected_category }}
        <svg class="chevron icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <use href="/static/ICONS/sprite.svg#chevron-down"></use>
        </svg>
      </summary>
      <ul class="faq-dropdown-list">
      {%for item in category_items %}
        <li><a class="faq-dropdown-link" href="/faq/category/{{ item.id }}">{{ item.category_name }}</a></li>
      {% endfor %}
      </ul>
      </details>

      <!-- View all button -->
      <a class="faq-search-submit" role="button" href="{{ url_for('faq_page') }}">View All</a>
    </div>

    <!-- Single FAQ entry -->
    {% for item in faq_items %}
      <section class="faq-entry">
        {{ item.text | safe }}
      </section>
    {% endfor %}
{% endblock %}

{% block chatbot_widget %}
    {% include "chatbot-widget.html" %}
{% endblock %}
